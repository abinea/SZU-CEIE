; 定时器

MODEL SMALL
.486
DATA SEGMENT
   I8254_CS EQU 210H
DATA ENDS

CODE SEGMENT
    ASSUME CS:CODE,DS:DATA
START:
    MOV AX,DATA
	MOV DS,AX

    MOV DX,I8254_CS+3 ;设置计数器0为工作方式3
	MOV AL,36H
	OUT DX,AL

	MOV DX,I8254_CS
	MOV AX,1000 ;给计时器0赋初值1000
	OUT DX,AL
	MOV AL,AH ;先送低字节后送高字节
	OUT DX,AL

	MOV DX,I8254_CS+3 ;设置计数器1为工作方式3
	MOV AL,76H
	OUT DX,AL

	MOV DX,I8254_CS+1 ;给计时器1赋初值1000
	MOV AX,1000
	OUT DX,AL
	MOV AL,AH ;先送低字节后送高字节
	OUT DX,AL 

EXIT:MOV AX,4C00H
	INT 21H  
CODE ENDS

END START